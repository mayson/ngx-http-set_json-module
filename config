ngx_feature="LibJWT library"
ngx_feature_name=NGX_HAVE_LIBJWT
ngx_feature_run=no

if [ -n "$LIBJWT_INC" -o -n "$LIBJWT_LIB" ]; then
	ngx_feature_path="$LIBJWT_INC"
	if [ $NGX_RPATH = YES ]; then
		ngx_feature_libs="-R$LIBJWT_LIB -L$LIBJWT_LIB -ljwt"
	else
		ngx_feature_libs="-L$LIBJWT_LIB -ljwt"
	fi
else
	ngx_feature_path=
	ngx_feature_libs="-ljwt"
fi

ngx_feature_incs="#include <jwt.h>"
ngx_feature_test="jwt_t *jwt; jwt_new(&jwt);"

. auto/feature

if [ $ngx_found = no ]; then
	echo "$0: error: LibJWT library not found. Check your paths."
	exit 1
fi

ngx_addon_name=ngx_http_set_jwt_module

ngx_module_type=HTTP_AUX_FILTER
ngx_module_name=$ngx_addon_name
ngx_module_incs="$ngx_feature_path"
ngx_module_deps=
ngx_module_srcs="$ngx_addon_dir/ngx_http_set_jwt_module.c"
ngx_module_libs="$ngx_feature_libs"

. auto/module
